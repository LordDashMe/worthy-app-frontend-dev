!function(){function c(e){var t=document.getElementById("status");"IDLE"===e?(t.classList.remove("-processing"),t.classList.add("-idle")):(t.classList.remove("-idle"),t.classList.add("-processing")),t.textContent=e}var s="https://worthy-app-backend.herokuapp.com",n="/user/login",a="/data-source",o="/data-source/entry";document.getElementById("get_token").addEventListener("click",function(){var e=document.getElementById("username").value,t=document.getElementById("password").value;c("LOADING AUTH..."),fetch(s+n,{method:"POST",headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1},body:JSON.stringify({userName:e,password:t})}).then(function(e){if(!e.ok)throw new Error("Please check network response.");return e.json()}).then(function(e){document.getElementById("token").value=e.token,c("IDLE")}).catch(function(e){console.error("Error:",e),c("IDLE")})}),document.getElementById("set_create_action").addEventListener("click",function(o,e){var t=document.getElementById("token").value,r=document.getElementById("data_source_system_name").value;c("LOADING DATA SOURCE..."),fetch(s+a+"/"+r,{method:"GET",headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1,"X-WORTHY-APP-JWT":t}}).then(function(e){if(!e.ok)throw new Error("Please check network response.");return e.json()}).then(function(e){if(!e||void 0===e.fields)throw new Error("Please check network response.");document.getElementById("current_data_source").value=r,document.getElementById("current_action").value=o;var t,n={};for(t in e.fields)n[e.fields[t].systemName]=function(e){switch(e){case"String":return"";case"Date":return"0000-00-00";case"Number":return 0}}(e.fields[t].dataType);document.getElementById("details").value=JSON.stringify({systemName:r,fields:n},null,4),c("IDLE")}).catch(function(e){console.error("Error:",e),c("IDLE")})}.bind(this,"CREATE")),document.getElementById("commit_action").addEventListener("click",function(){var e=document.getElementById("token").value,t=document.getElementById("current_action").value,n=document.getElementById("details").value;c("LOADING COMMIT..."),fetch(s+o,{method:function(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PATCH"}}(t),headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1,"X-WORTHY-APP-JWT":e},body:n}).then(function(e){if(!e.ok)throw new Error("Please check network response.");return e.json()}).then(function(e){alert(e.message),c("IDLE")}).catch(function(e){console.error("Error:",e),c("IDLE")})})}();