"use strict";!function(){function e(e){var t,n,o;c||(c=!0,t=document.getElementById("token").value,n=document.getElementById("data_source_system_name").value,r("(SYS MSG) LOADING DATA SOURCE: "+n+" with action "+e),"POST"===e?(document.getElementById("data_source_form_body").hidden=!1,document.getElementById("data_source_url").value=a.source+d(n),document.getElementById("data_source_action").value=e,o=a.source+u(n),fetch(o,{method:"GET",headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1,"X-WORTHY-APP-JWT":t}}).then(m).then(function(e){s();var t,n={};for(t in e.fields)n[e.fields[t].systemName]=i(e.fields[t].dataType);document.getElementById("data_source_body").value=JSON.stringify(n,null,2),r("(SYS MSG) SUCCESS RESPONSE: Done, Please check the Data Source Body field."),c=!1}).catch(E)):"GET"===e&&(document.getElementById("data_source_form_body").hidden=!0,document.getElementById("data_source_url").value=a.source+d(n),document.getElementById("data_source_action").value=e,document.getElementById("data_source_output").value="",c=!1))}var a={source:"https://worthy-app.onrender.com",auth:"/user/login",data_source:"/data-source"},c=!1,u=function(e){return a.data_source+"/"+e},d=function(e){return a.data_source+"/"+e+"/entry"},s=function(){alert("Done, please check logs for more info.")},r=function(e){var t=new Date,t=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2),n=document.getElementById("logs");n.value+="["+t+"]: "+e+"\n",n.scrollTop=n.scrollHeight},l=function(e){document.getElementById("status").textContent="["+e.toUpperCase()+"]"},i=function(e){switch(e){case"String":return"";case"Date":return"0000-00-00";case"Number":return 0}},m=function(e){return e.ok?e.json():Promise.reject(e)},E=function(e){function t(e){alert("Something's went wrong, please try again later."),console.error(e),r("(SYS MSG) RESPONSE ERROR: Something's went wrong, please try again later."),l("IDLE"),c=!1}404!==e.status&&"function"==typeof e.json?e.json().then(function(e){document.getElementById("data_source_output").value=e.message,alert(e.message),console.error(e.message),r("(SYS MSG) RESPONSE ERROR: "+e.message),l("IDLE"),c=!1}):t(e)};document.getElementById("get_token").addEventListener("click",function(){var e,t;c||(c=!0,t=document.getElementById("username").value,e=document.getElementById("password").value,r("(SYS MSG) LOADING AUTH"),t={method:"POST",headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1},body:JSON.stringify({userName:t,password:e})},fetch(a.source+a.auth,t).then(m).then(function(e){s(),document.getElementById("token").value=e.token,r("(SYS MSG) SUCCESS RESPONSE: Done, please check the Token field."),c=!1}).catch(E))}),document.getElementById("set_get_action").addEventListener("click",e.bind(this,"GET")),document.getElementById("set_post_action").addEventListener("click",e.bind(this,"POST")),document.getElementById("commit_action").addEventListener("click",function(){var e,t,n,o;c||(r("(SYS MSG) COMMIT ACTION TRIGGERED"),l("PROCESSING"),c=!0,document.getElementById("data_source_output").value="",o=document.getElementById("token").value,e=document.getElementById("data_source_url").value,t=document.getElementById("data_source_action").value,n=document.getElementById("data_source_body").value,r("Action: "+t),"POST"===t&&r("Request Body: \n"+n),o={method:t,headers:{"Content-Type":"application/json","X-WORTHY-APP-HEADER":1,"X-WORTHY-APP-JWT":o}},"POST"!==t&&"PATCH"!==t||(o.body=n),fetch(e,o).then(m).then(function(e){s(),document.getElementById("data_source_output").value=JSON.stringify(e,null,4),r("(SYS MSG) SUCCESS RESPONSE: Done, Please check the Output field."),l("IDLE"),c=!1}).catch(E))})}();